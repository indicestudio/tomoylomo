!function(t){"use strict";var e={cursor:"move",decelerate:!0,triggerHardware:!1,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},n="kinetic-settings",i="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()),t.support=t.support||{},t.extend(t.support,{touch:"ontouchend"in document});var r=function(){return!1},o=function(t,e){return 0===Math.floor(Math.abs(t))?0:t*e},s=function(t,e){var n=t;return t>0?t>e&&(n=e):0-e>t&&(n=0-e),n},a=function(t,e){this.removeClass(t.movingClass.up).removeClass(t.movingClass.down).removeClass(t.movingClass.left).removeClass(t.movingClass.right).removeClass(t.deceleratingClass.up).removeClass(t.deceleratingClass.down).removeClass(t.deceleratingClass.left).removeClass(t.deceleratingClass.right),t.velocity>0&&this.addClass(e.right),t.velocity<0&&this.addClass(e.left),t.velocityY>0&&this.addClass(e.down),t.velocityY<0&&this.addClass(e.up)},c=function(t,e){e.velocity=0,e.velocityY=0,e.decelerate=!0,"function"==typeof e.stopped&&e.stopped.call(t,e)},u=function(t,e){var n=t[0];e.x&&n.scrollWidth>0?(n.scrollLeft=e.scrollLeft=n.scrollLeft+e.velocity,Math.abs(e.velocity)>0&&(e.velocity=e.decelerate?o(e.velocity,e.slowdown):e.velocity)):e.velocity=0,e.y&&n.scrollHeight>0?(n.scrollTop=e.scrollTop=n.scrollTop+e.velocityY,Math.abs(e.velocityY)>0&&(e.velocityY=e.decelerate?o(e.velocityY,e.slowdown):e.velocityY)):e.velocityY=0,a.call(t,e,e.deceleratingClass),"function"==typeof e.moved&&e.moved.call(t,e),Math.abs(e.velocity)>0||Math.abs(e.velocityY)>0?window.requestAnimationFrame(function(){u(t,e)}):c(t,e)},l=function(e){var i=t.kinetic.callMethods[e],r=Array.prototype.slice.call(arguments);i&&this.each(function(){var e=r.slice(1),o=t(this).data(n);e.unshift(o),i.apply(this,e)})},f=function(e,n){e[0];t.support.touch?e.bind("touchstart",n.events.touchStart).bind("touchend",n.events.inputEnd).bind("touchmove",n.events.touchMove):e.mousedown(n.events.inputDown).mouseup(n.events.inputEnd).mousemove(n.events.inputMove),e.click(n.events.inputClick).scroll(n.events.scroll).bind("selectstart",r).bind("dragstart",n.events.dragStart)},d=function(e,n){e[0];t.support.touch?e.unbind("touchstart",n.events.touchStart).unbind("touchend",n.events.inputEnd).unbind("touchmove",n.events.touchMove):e.unbind("mousedown",n.events.inputDown).unbind("mouseup",n.events.inputEnd).unbind("mousemove",n.events.inputMove).unbind("scroll",n.events.scroll),e.unbind("click",n.events.inputClick).unbind("selectstart",r),e.unbind("dragstart",n.events.dragStart)},h=function(r){this.addClass(i).each(function(){var i=this,o=t(this);if(!o.data(n)){var c,l,d,h,p=t.extend({},e,r),g=!1,v=!1,m=!1,y=1e3/p.throttleFPS;p.velocity=0,p.velocityY=0;var b=function(){c=!1,l=!1,m=!1};t(document).mouseup(b).click(b);var w=function(){p.velocity=s(g-c,p.maxvelocity),p.velocityY=s(v-l,p.maxvelocity)},C=function(e){return t.isFunction(p.filterTarget)?p.filterTarget.call(i,e)!==!1:!0},x=function(t,e){m=!0,p.velocity=g=0,p.velocityY=v=0,c=t,l=e},_=function(){c&&g&&p.decelerate===!1&&(p.decelerate=!0,w(),c=g=m=!1,u(o,p))},k=function(e,n){(!d||new Date>new Date(d.getTime()+y))&&(d=new Date,m&&(c||l)&&(h&&(t(h).blur(),h=null,o.focus()),p.decelerate=!1,p.velocity=p.velocityY=0,o[0].scrollLeft=p.scrollLeft=p.x?o[0].scrollLeft-(e-c):o[0].scrollLeft,o[0].scrollTop=p.scrollTop=p.y?o[0].scrollTop-(n-l):o[0].scrollTop,g=c,v=l,c=e,l=n,w(),a.call(o,p,p.movingClass),"function"==typeof p.moved&&p.moved.call(o,p)))};p.events={touchStart:function(t){var e;C(t.target)&&(e=t.originalEvent.touches[0],x(e.clientX,e.clientY),t.stopPropagation())},touchMove:function(t){var e;m&&(e=t.originalEvent.touches[0],k(e.clientX,e.clientY),t.preventDefault&&t.preventDefault())},inputDown:function(t){C(t.target)&&(x(t.clientX,t.clientY),h=t.target,"IMG"===t.target.nodeName&&t.preventDefault(),t.stopPropagation())},inputEnd:function(t){_(),h=null,t.preventDefault&&t.preventDefault()},inputMove:function(t){m&&(k(t.clientX,t.clientY),t.preventDefault&&t.preventDefault())},scroll:function(t){"function"==typeof p.moved&&p.moved.call(o,p),t.preventDefault&&t.preventDefault()},inputClick:function(t){return Math.abs(p.velocity)>0?(t.preventDefault(),!1):void 0},dragStart:function(){return h?!1:void 0}},f(o,p),o.data(n,p).css("cursor",p.cursor),p.triggerHardware&&o.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})}})};t.kinetic={settingsKey:n,callMethods:{start:function(e,n){var i=t(this);e=t.extend(e,n),e&&(e.decelerate=!1,u(i,e))},end:function(e){t(this);e&&(e.decelerate=!0)},stop:function(e){var n=t(this);c(n,e)},detach:function(e){var n=t(this);d(n,e),n.removeClass(i).css("cursor","")},attach:function(e){var n=t(this);f(n,e),n.addClass(i).css("cursor","move")}}},t.fn.kinetic=function(t){return"string"==typeof t?l.apply(this,arguments):h.call(this,t),this}}(window.jQuery||window.Zepto);
